<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Vyhledávání alb a skladeb přes Deezer API.">
    <meta name="author" content="Jakub M.">
    <meta name="keywords" content="Deezer, hudba, alba, skladby, vyhledávání, playlist, wishlist">
    <title>Deezer - Hledání</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
</head>
<body>
    <div class="app-shell">
        <header class="app-header">
            <h1 class="app-title">Deezer vyhledávání</h1>
            <nav class="app-nav" aria-label="Hlavní navigace">
                <button class="pill pill-active" type="button" id="navSearch" aria-current="page">Hledání</button>
                <button class="pill" type="button" id="navWishlist">Seznam přání</button>
            </nav>
        </header>

        <main>
            <div id="viewSearch" class="app-main">
                <aside class="panel filters-panel">
                    <div class="panel-title">Filtry</div>
                    <form id="filtersForm">
                        <div class="filter-group">
                            <label for="artistInput" class="filter-label">Interpret</label>
                            <input type="text" id="artistInput" class="form-control filter-input" placeholder="Např. Puscifer" maxlength="80" pattern="[A-Za-zÀ-ž0-9 .,&'\-]{1,80}" title="Zadejte 1–80 znaků (písmena, čísla, mezera, tečka, čárka, apostrof, pomlčka).">
                            <div id="artistSuggestions" class="suggestions-list" hidden></div>
                        </div>
                        <div class="filter-group">
                            <label for="genreSelect" class="filter-label">Žánr</label>
                            <select id="genreSelect" class="form-select filter-input">
                                <option value="">Žánr (vyberte)</option>
                                <option value="rock">Rock</option>
                                <option value="pop">Pop</option>
                                <option value="hip-hop">Hip-Hop</option>
                                <option value="jazz">Jazz</option>
                                <option value="blues">Blues</option>
                                <option value="classical">Classical</option>
                                <option value="electronic">Electronic</option>
                                <option value="metal">Metal</option>
                                <option value="country">Country</option>
                                <option value="reggae">Reggae</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="genreInput" class="filter-label">Vlastní žánr</label>
                            <input type="text" id="genreInput" class="form-control filter-input" placeholder="Žánr (vlastní)" maxlength="40" pattern="[A-Za-zÀ-ž0-9 .,&'\-]{1,40}" title="Zadejte 1–40 znaků (písmena, čísla, mezera, tečka, čárka, apostrof, pomlčka).">
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Datum vydání</label>
                            <div class="filter-row">
                                <div class="d-flex flex-column gap-1">
                                    <span class="filter-label">Od</span>
                                    <input type="date" id="releaseFromInput" class="form-control filter-input" min="1900-01-01" max="2100-12-31">
                                </div>
                                <div class="d-flex flex-column gap-1">
                                    <span class="filter-label">Do</span>
                                    <input type="date" id="releaseToInput" class="form-control filter-input" min="1900-01-01" max="2100-12-31">
                                </div>
                            </div>
                        </div>
                        <button id="searchBtn" class="btn btn-primary filter-action" type="submit">Hledat</button>
                    </form>
                </aside>

                <section class="content-panel" aria-live="polite">
                    <h2 class="visually-hidden">Výsledky vyhledávání</h2>
                    <div class="content-top">
                        <div class="pill-switch" id="searchTypeSwitch" aria-label="Vyhledávání alb">
                            <div class="pill pill-active">Alba</div>
                        </div>
                        <select id="searchTypeSelect" class="form-select visually-hidden">
                            <option value="track">Hledat: Skladby</option>
                            <option value="album" selected>Hledat: Alba</option>
                        </select>
                    </div>
                    <div id="searchResult" class="card-grid"></div>
                    <div class="d-flex justify-content-center mt-3" id="loadMoreControls">
                        <button type="button" class="btn btn-outline-light" id="loadMoreBtn" disabled>Načíst více</button>
                    </div>
                    <div id="loadingOverlay" class="loading-overlay" hidden>
                        <div class="loading-card">
                            <div class="spinner-border text-light" role="status" aria-label="Načítání"></div>
                            <div id="loadingMessage" class="small mt-2"></div>
                        </div>
                    </div>
                </section>

                <aside class="panel wishlist-panel">
                    <div class="panel-title">Naposledy uloženo</div>
                    <div class="pill-switch pill-switch-sm" id="lastSavedSwitch">
                        <button type="button" class="pill pill-active" data-type="track">Skladby</button>
                        <button type="button" class="pill" data-type="album">Alba</button>
                    </div>
                    <div class="wishlist-list" id="lastSavedList"></div>
                </aside>
            </div>

            <div id="viewWishlist" class="app-main" hidden>
                <aside class="panel filters-panel">
                    <div class="panel-title">Přehled</div>
                    <div class="text-light small">Zde najdete uložené skladby a alba.</div>
                </aside>

                <section class="content-panel" aria-live="polite">
                    <h2 class="visually-hidden">Seznam přání</h2>
                    <div class="content-top">
                        <div class="pill-switch" id="wishlistTypeSwitch">
                            <button type="button" class="pill wishlist-type-btn" data-type="track">Skladby</button>
                            <button type="button" class="pill wishlist-type-btn" data-type="album">Alba</button>
                        </div>
                    </div>
                    <div id="wishlistResult" class="card-grid"></div>
                </section>

                <aside class="panel wishlist-panel">
                    <div class="panel-title">Tipy</div>
                    <div class="text-light small">Ohodnoťte položky a kdykoliv je odeberte.</div>
                </aside>
            </div>
        </main>
    </div>

    <div class="modal fade" id="detailsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title h5">Detail</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3" id="detailCoverWrap">
                        <img id="detailCover" class="modal-cover" alt="Obal alba" src="data:image/gif;base64,R0lGODlhAQABAAAAACw=">
                    </div>
                    <p><strong>Název:</strong> <span id="detailName"></span></p>
                    <p><strong>Interpret:</strong> <span id="detailArtist"></span></p>
                    <p id="detailAlbumRow"><strong>Album:</strong> <span id="detailAlbum"></span></p>
                    <p id="detailGenreRow"><strong>Žánr:</strong> <span id="detailGenre"></span></p>
                    <p><strong>Datum vydání:</strong> <span id="detailRelease"></span></p>
                    <div class="mb-2">
                        <strong>Hodnocení:</strong>
                        <span id="detailRating"></span>
                    </div>
                    <p id="detailDurationRow"><strong>Délka:</strong> <span id="detailDuration"></span></p>
                    <p id="detailTrackNumberRow"><strong>Číslo skladby:</strong> <span id="detailTrackNumber"></span></p>
                    <p id="detailTotalTracksRow"><strong>Počet skladeb:</strong> <span id="detailTotalTracks"></span></p>
                    <div id="detailActions" class="d-flex gap-2 flex-wrap mb-3">
                        <button type="button" class="btn btn-sm btn-primary modal-add-item">Přidat</button>
                        <button type="button" class="btn btn-sm btn-outline-danger modal-remove-item">Odebrat</button>
                    </div>
                    <div id="detailAlbumTracks" class="mt-2"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="js/elements.js"></script>
    <script src="js/network.js"></script>
    <script src="js/wishlist.js"></script>
    <script src="js/renders.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
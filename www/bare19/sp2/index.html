<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Task manager</title>

  <link rel="stylesheet" href="./css/style.css" />

  <!--Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="topbar__left">
      <div class="brand">Task manager</div>
      <nav class="nav">
        <button class="linkbtn" id="nav-home" type="button">Seznam</button>
        <button class="linkbtn" id="nav-stats" type="button">Statistiky</button>
      </nav>
    </div>

    <div class="topbar__right">
      <div class="weather" id="weather">
        <i class="fa-solid fa-cloud-sun"></i>
        <span>Načítám počasí…</span>
      </div>

      <button id="toggle-dark" class="btn btn--ghost" type="button" title="Dark mode">
        <i class="fa-solid fa-moon"></i>
      </button>

      <button id="btn-add" class="btn" type="button">
        <i class="fa-solid fa-plus"></i> Přidat Task
      </button>
    </div>
  </header>

  <!-- PAGE HOME -->
  <main class="page" id="page-home">
    <section class="home">
      <!-- FILTERS -->
      <aside class="filters">
        <h2>Filtry</h2>

        <div class="block">
          <div class="label">Stav</div>
          <div class="chips" id="filter-chips">
            <button class="chip" data-filter="all" type="button">Vše</button>
            <button class="chip" data-filter="active" type="button">Aktivní</button>
            <button class="chip" data-filter="completed" type="button">Hotové</button>
          </div>
        </div>

        <div class="block">
          <label class="field">
            <span>Kategorie</span>
            <select id="filter-category">
              <option value="all">Vše</option>
            </select>
          </label>
        </div>

        <div class="block">
          <label class="field">
            <span>Priorita</span>
            <select id="filter-priority">
              <option value="all">Vše</option>
              <option value="high">Vysoká</option>
              <option value="medium">Střední</option>
              <option value="low">Nízká</option>
            </select>
          </label>
        </div>

        <div class="block">
          <label class="field">
            <span>Hledat</span>
            <input id="search" type="search" placeholder="Název / popis…" />
          </label>
        </div>

        <div class="block">
          <label class="field">
            <span>Řazení</span>
            <select id="sort">
              <option value="created_desc" selected>Nejnovější</option>
              <option value="created_asc">Nejstarší</option>
              <option value="due_asc">Termín (nejdřív)</option>
              <option value="prio_desc">Priorita (nejvyšší)</option>
            </select>
          </label>
        </div>

        <div class="block row">
          <button id="clear-completed" class="btn btn--ghost" type="button">
            <i class="fa-solid fa-trash-can"></i> Smazat hotové
          </button>
        </div>

        <div class="muted" id="stats-mini"></div>

        <hr />

        <button id="reset-data" class="btn btn--ghost" type="button">
          <i class="fa-solid fa-rotate-right"></i> Reset z REST API
        </button>

        <p class="error" id="global-msg" aria-live="polite"></p>
      </aside>

      <!-- SEZNAM TÁSKŮ -->
      <section class="list">
        <h2 class="centerTitle">Seznam tasků</h2>

        <div class="list__head muted">
          <div>Hotovo</div>
          <div>Název</div>
          <div>Popis</div>
          <div class="right">Akce</div>
        </div>

        <ul id="task-list" class="tasklist"></ul>
        <div id="empty" class="muted empty"></div>
      </section>
    </section>
  </main>

  <!-- PAGE: STATS -->
  <main class="page hidden" id="page-stats">
    <section class="statsPage">
      <h2 class="pageTitle">Statistiky</h2>

      <div class="statsGrid">
        <div class="chartBox">
          <canvas id="chart" height="260"></canvas>
        </div>

        <div class="statsText" id="stats-text">
          <div class="muted">Načítám statistiky…</div>
        </div>
      </div>
    </section>
  </main>

  <!-- ADD a EDIT -->
  <div class="modal hidden" id="modal">
    <div class="modal__backdrop" id="modal-backdrop"></div>

    <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <div class="modal__header">
        <h2 id="modal-title">Přidání / úprava úkolu</h2>
      </div>

      <form id="task-form" class="form">
        <input type="hidden" id="form-id" />

        <label class="field">
          <span>Název *</span>
          <input id="form-title" type="text" maxlength="80" required />
        </label>

        <label class="field">
          <span>Popis</span>
          <textarea id="form-desc" rows="4" maxlength="240"></textarea>
        </label>

        <label class="field">
          <span>Kategorie *</span>
          <input id="form-category" type="text" maxlength="30" placeholder="např. school/work/personal" required />
        </label>

        <label class="field">
          <span>Typ úkolu</span>
          <select id="form-tasktype">
            <option value="indoor" selected>Indoor</option>
            <option value="outdoor">Outdoor</option>
          </select>
        </label>

        <label class="field">
          <span>Priorita</span>
          <select id="form-priority">
            <option value="low">Nízká</option>
            <option value="medium" selected>Střední</option>
            <option value="high">Vysoká</option>
          </select>
        </label>

        <label class="field">
          <span>Termín</span>
          <input id="form-due" type="date" />
        </label>

        <div id="form-weather" class="muted" aria-live="polite"></div>

        <div class="modal__actions">
          <button class="btn btn--ghost" id="btn-cancel" type="button">Zrušit</button>
          <button class="btn" type="submit" id="btn-submit">Přidat</button>
        </div>

        <p class="error" id="form-error" aria-live="polite"></p>
      </form>
    </div>
  </div>

  <script type="module" src="./js/app.js"></script>
</body>
</html>
